<!DOCTYPE html>
<html lang="ru" data-theme="light">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <meta name="description" content="–§—Ä—É–∫—Ç–∏–∫ –ß–∞—Ç - –¥—Ä—É–∂–µ–ª—é–±–Ω—ã–π –ø–æ–º–æ—â–Ω–∏–∫ –¥–ª—è –¥–µ—Ç–µ–π –≤ —É—á–µ–±–µ">
    <meta name="keywords" content="—á–∞—Ç, –ø–æ–º–æ—â–Ω–∏–∫, —É—á–µ–±–∞, –¥–µ—Ç–∏, —Ñ—Ä—É–∫—Ç–∏–∫">
    <title>üçì –§—Ä—É–∫—Ç–∏–∫ –ß–∞—Ç - –ü–æ–º–æ—â–Ω–∏–∫ –≤ —É—á—ë–±–µ</title>
    
    <!-- PWA Meta Tags -->
    <meta name="application-name" content="–§—Ä—É–∫—Ç–∏–∫ –ß–∞—Ç">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="default">
    <meta name="apple-mobile-web-app-title" content="–§—Ä—É–∫—Ç–∏–∫ –ß–∞—Ç">
    <meta name="mobile-web-app-capable" content="yes">
    <meta name="theme-color" content="#ff6b6b">
    <meta name="msapplication-TileColor" content="#ff6b6b">
    <meta name="msapplication-TileImage" content="/icons/icon-144x144.png">
    <meta name="msapplication-config" content="/browserconfig.xml">
    
    <!-- Force light theme -->
    <meta name="color-scheme" content="light">
    <meta name="supported-color-schemes" content="light">
    
    <!-- Preload critical resources -->
    <link rel="preload" href="https://cdn.tailwindcss.com" as="script">
    <link rel="preload" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" as="style">
    
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" integrity="sha512-iecdLmaskl7CVkqkXNQ/ZH/XLlvWZOJyj7Yy7tcenmpD1ypASozpmT/E0iPtmFIB46ZmdtAc9eNBvH0H/ZpiBw==" crossorigin="anonymous" referrerpolicy="no-referrer">
    <link rel="stylesheet" href="styles.css">
    
    <!-- PWA Manifest -->
    <link rel="manifest" href="manifest.json">
    
    <!-- Favicon and Icons -->
    <link rel="icon" type="image/png" href="icons/icon-32x32.png" sizes="32x32">
    <link rel="icon" type="image/png" href="icons/icon-16x16.png" sizes="16x16">
    <link rel="apple-touch-icon" href="icons/icon-180x180.png">
    <link rel="shortcut icon" href="icons/favicon.ico">
    
    <!-- Splash Screen for iOS -->
    <link rel="apple-touch-startup-image" href="icons/apple-splash-2048-2732.jpg" media="(device-width: 1024px) and (device-height: 1366px) and (-webkit-device-pixel-ratio: 2) and (orientation: portrait)">
    <link rel="apple-touch-startup-image" href="icons/apple-splash-2732-2048.jpg" media="(device-width: 1024px) and (device-height: 1366px) and (-webkit-device-pixel-ratio: 2) and (orientation: landscape)">
</head>
<body class="min-h-screen flex items-center justify-center p-0 no-select">
    <!-- –§—Ä—É–∫—Ç–æ–≤—ã–π –¥–æ–∂–¥—å -->
    <div class="fruit-rain" id="fruitRain" aria-hidden="true"></div>
    
    <!-- –ë–æ–∫–æ–≤–∞—è –ø–∞–Ω–µ–ª—å —Å —á–∞—Ç–∞–º–∏ -->
    <div class="chats-sidebar" id="chatsSidebar" role="dialog" aria-label="–ú–æ–∏ —á–∞—Ç—ã" aria-hidden="true">
        <div class="sidebar-header">
            <h2 class="text-xl font-bold">–ú–æ–∏ —á–∞—Ç—ã</h2>
            <button id="closeSidebar" class="text-white text-xl close-sidebar-btn" aria-label="–ó–∞–∫—Ä—ã—Ç—å –±–æ–∫–æ–≤—É—é –ø–∞–Ω–µ–ª—å">
                <i class="fas fa-times" aria-hidden="true"></i>
            </button>
        </div>
        <div class="sidebar-content">
            <div class="sidebar-info">
                <p class="text-sm text-gray-600 mb-4">–ó–¥–µ—Å—å –æ—Ç–æ–±—Ä–∞–∂–∞—é—Ç—Å—è –≤—Å–µ –≤–∞—à–∏ —á–∞—Ç—ã —Å –§—Ä—É–∫—Ç–∏–∫–æ–º</p>
            </div>
            <div id="chatsList" role="list">
                <!-- –°–ø–∏—Å–æ–∫ —á–∞—Ç–æ–≤ –±—É–¥–µ—Ç –∑–¥–µ—Å—å -->
            </div>
        </div>
    </div>
    
    <!-- –û–≤–µ—Ä–ª–µ–π –¥–ª—è –∑–∞–∫—Ä—ã—Ç–∏—è –±–æ–∫–æ–≤–æ–π –ø–∞–Ω–µ–ª–∏ -->
    <div class="sidebar-overlay" id="sidebarOverlay" aria-hidden="true"></div>
    
    <!-- –ß–∞—Ç –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä -->
    <div class="chat-container">
        <!-- –ó–∞–≥–æ–ª–æ–≤–æ–∫ —á–∞—Ç–∞ -->
        <header class="header">
            <button id="menuButton" class="menu-btn" aria-label="–û—Ç–∫—Ä—ã—Ç—å –º–µ–Ω—é —á–∞—Ç–æ–≤">
                <i class="fas fa-bars" aria-hidden="true"></i>
            </button>
            <div class="text-center flex-1 px-4">
                <h1 class="text-3xl font-bold drop-shadow-lg">üçì –§—Ä—É–∫—Ç–∏–∫ –ß–∞—Ç üçç</h1>
                <div class="text-white/90 text-sm mt-1">–ü–æ–º–æ–≥–∞—é –≤ —É—á—ë–±–µ –∏ –æ—Ç–≤–µ—á–∞—é –Ω–∞ –≤–æ–ø—Ä–æ—Å—ã!</div>
            </div>
            <button id="newChatButton" class="new-chat-btn" aria-label="–°–æ–∑–¥–∞—Ç—å –Ω–æ–≤—ã–π —á–∞—Ç">
                <i class="fas fa-plus" aria-hidden="true"></i> 
                <span class="hidden md:inline">–ù–æ–≤—ã–π —á–∞—Ç</span>
            </button>
        </header>
        
        <!-- –û–±–ª–∞—Å—Ç—å —Å–æ–æ–±—â–µ–Ω–∏–π -->
        <main class="messages-container" id="chatMessages" role="log" aria-live="polite">
            <!-- –ü—É—Å—Ç–æ–π —á–∞—Ç -->
            <div class="empty-chat" id="emptyChat">
                <div class="empty-chat-icon" aria-hidden="true">üçì</div>
                <h2 class="text-2xl font-bold mb-2">–ù–∞—á–Ω–∏ –Ω–æ–≤—ã–π —Ä–∞–∑–≥–æ–≤–æ—Ä!</h2>
                <p class="text-lg">–ù–∞–ø–∏—à–∏ —á—Ç–æ-–Ω–∏–±—É–¥—å –§—Ä—É–∫—Ç–∏–∫—É, —á—Ç–æ–±—ã –Ω–∞—á–∞—Ç—å –æ–±—â–µ–Ω–∏–µ.</p>
                <div class="mt-4 text-sm text-gray-600">
                    <p>‚ú® –§—Ä—É–∫—Ç–∏–∫ –ø–æ–º–æ–∂–µ—Ç —Å:</p>
                    <ul class="list-disc list-inside mt-2 text-left">
                        <li>–î–æ–º–∞—à–Ω–∏–º–∏ –∑–∞–¥–∞–Ω–∏—è–º–∏</li>
                        <li>–û–±—ä—è—Å–Ω–µ–Ω–∏–µ–º —Å–ª–æ–∂–Ω—ã—Ö —Ç–µ–º</li>
                        <li>–ü–æ–¥–≥–æ—Ç–æ–≤–∫–æ–π –∫ —É—Ä–æ–∫–∞–º</li>
                    </ul>
                </div>
            </div>
        </main>
        
        <!-- –°—Ç–∞—Ç—É—Å —Å–æ–æ–±—â–µ–Ω–∏—è -->
        <div id="statusMessage" class="status-message" role="status" aria-live="polite"></div>
        
        <!-- –ò–Ω–¥–∏–∫–∞—Ç–æ—Ä –Ω–∞–±–æ—Ä–∞ -->
        <div id="typingIndicator" class="hidden px-6 py-2" aria-hidden="true">
            <div class="flex items-start">
                <div class="fruit-avatar" style="background: linear-gradient(135deg, #6bcf7f, #4d96ff);" aria-hidden="true">üçç</div>
                <div class="chat-bubble bot-bubble">
                    <div class="font-bold text-purple-600 mb-1">–§—Ä—É–∫—Ç–∏–∫ –¥—É–º–∞–µ—Ç</div>
                    <div class="typing-dots">
                        <span class="typing-dot" aria-hidden="true"></span>
                        <span class="typing-dot" aria-hidden="true"></span>
                        <span class="typing-dot" aria-hidden="true"></span>
                    </div>
                </div>
            </div>
        </div>
        
        <!-- –ü–æ–ª–µ –≤–≤–æ–¥–∞ -->
        <footer class="input-container">
            <div class="flex space-x-3 items-end">
                <div class="flex-1 relative">
                    <input 
                        type="text" 
                        id="messageInput" 
                        placeholder="–ù–∞–ø–∏—à–∏ —Å–æ–æ–±—â–µ–Ω–∏–µ –§—Ä—É–∫—Ç–∏–∫—É... üçì" 
                        class="message-input-large w-full px-6 py-4 rounded-2xl border-3 border-pink-300 focus:border-pink-500 focus:ring-4 focus:ring-pink-200 outline-none transition-all bg-white text-gray-800 text-lg"
                        aria-label="–°–æ–æ–±—â–µ–Ω–∏–µ –¥–ª—è –§—Ä—É–∫—Ç–∏–∫–∞"
                        maxlength="1000"
                    >
                    <div class="input-character-count" id="charCount">
                        0/1000
                    </div>
                </div>
                <button 
                    id="sendButton"
                    class="send-btn-large px-8 py-4 rounded-2xl text-white font-bold text-lg transition-all duration-300"
                    aria-label="–û—Ç–ø—Ä–∞–≤–∏—Ç—å —Å–æ–æ–±—â–µ–Ω–∏–µ"
                >
                    <i class="fas fa-paper-plane" aria-hidden="true"></i>
                </button>
            </div>
        </footer>
    </div>

    <!-- Service Worker Registration -->
    <script>
        // –†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è Service Worker –¥–ª—è PWA
        if ('serviceWorker' in navigator) {
            window.addEventListener('load', function() {
                navigator.serviceWorker.register('sw.js')
                    .then(function(registration) {
                        console.log('ServiceWorker –∑–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä–æ–≤–∞–Ω —É—Å–ø–µ—à–Ω–æ: ', registration.scope);
                    })
                    .catch(function(error) {
                        console.log('–û—à–∏–±–∫–∞ —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–∏ ServiceWorker: ', error);
                    });
            });
        }
    </script>

    <!-- Loading script after DOM -->
    <script src="script.js" defer></script>
</body>
</html>
